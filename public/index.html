<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–Ø–≤–î–µ–ª–µ - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏–π. –ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –¥–µ–Ω—å–≥–∏ –≤—ã–ø–æ–ª–Ω—è—è –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏.">
    <title>–Ø–≤–î–µ–ª–µ - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∑–∞–¥–∞–Ω–∏–π</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        * { box-sizing: border-box; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const API_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:3000/api' 
            : '/api';

        const api = {
            async request(endpoint, options = {}) {
                const res = await fetch(`${API_URL}${endpoint}`, {
                    ...options,
                    headers: { 'Content-Type': 'application/json', ...options.headers }
                });
                return res.json();
            },
            register: (username, password, type, agreedToTerms) => 
                api.request('/register', { method: 'POST', body: JSON.stringify({ username, password, type, agreedToTerms }) }),
            login: (username, password) => 
                api.request('/login', { method: 'POST', body: JSON.stringify({ username, password }) }),
            getProfile: (token) => 
                api.request('/profile', { headers: { 'Authorization': `Bearer ${token}` } }),
            getTasks: (filters = {}) => 
                api.request('/tasks?' + new URLSearchParams(filters)),
            createTask: (token, data) => 
                api.request('/tasks', { method: 'POST', headers: { 'Authorization': `Bearer ${token}` }, body: JSON.stringify(data) }),
            deleteTask: (token, taskId) => 
                api.request(`/tasks/${taskId}`, { method: 'DELETE', headers: { 'Authorization': `Bearer ${token}` } }),
            getMyTasks: (token) => 
                api.request('/tasks/my', { headers: { 'Authorization': `Bearer ${token}` } }),
            applyToTask: (token, taskId) => 
                api.request(`/tasks/${taskId}/apply`, { method: 'POST', headers: { 'Authorization': `Bearer ${token}` } }),
            getTaskApplications: (token, taskId) => 
                api.request(`/tasks/${taskId}/applications`, { headers: { 'Authorization': `Bearer ${token}` } }),
            getMyApplications: (token) => 
                api.request('/applications/my', { headers: { 'Authorization': `Bearer ${token}` } }),
            approveApplication: (token, id) => 
                api.request(`/applications/${id}/approve`, { method: 'POST', headers: { 'Authorization': `Bearer ${token}` } }),
            rejectApplication: (token, id) => 
                api.request(`/applications/${id}/reject`, { method: 'POST', headers: { 'Authorization': `Bearer ${token}` } }),
            rateUser: (token, applicationId, rating, ratedUserId) => 
                api.request(`/applications/${applicationId}/rate`, { method: 'POST', headers: { 'Authorization': `Bearer ${token}` }, body: JSON.stringify({ rating, ratedUserId }) }),
            addBalance: (token, amount) => 
                api.request('/balance/add', { method: 'POST', headers: { 'Authorization': `Bearer ${token}` }, body: JSON.stringify({ amount }) }),
            withdrawBalance: (token) => 
                api.request('/balance/withdraw', { method: 'POST', headers: { 'Authorization': `Bearer ${token}` } }),
            buyPremium: (token) => 
                api.request('/premium/buy', { method: 'POST', headers: { 'Authorization': `Bearer ${token}` } }),
            getLeaderboard: () => 
                api.request('/leaderboard'),
            sendSupport: (token, subject, message) => 
                api.request('/support', { method: 'POST', headers: { 'Authorization': `Bearer ${token}` }, body: JSON.stringify({ subject, message }) })
        };

        const Icon = ({ name, className = "w-5 h-5" }) => {
            const paths = {
                briefcase: "M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",
                plus: "M12 4v16m8-8H4",
                search: "M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",
                mapPin: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z",
                dollar: "M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",
                user: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",
                check: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",
                x: "M6 18L18 6M6 6l12 12",
                send: "M12 19l9 2-9-18-9 18 9-2zm0 0v-8",
                wallet: "M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z",
                award: "M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z",
                trash: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
            };
            
            return (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={paths[name]} />
                </svg>
            );
        };

        const Star = ({ className = "w-5 h-5" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 24 24">
                <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
            </svg>
        );

        function TaskPlatform() {
            const [token, setToken] = useState(localStorage.getItem('token'));
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            
            const [showAuthModal, setShowAuthModal] = useState(!token);
            const [showAgreement, setShowAgreement] = useState(false);
            const [agreedToTerms, setAgreedToTerms] = useState(false);
            const [isLogin, setIsLogin] = useState(true);
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [userType, setUserType] = useState('worker');
            
            const [tasks, setTasks] = useState([]);
            const [myApplications, setMyApplications] = useState([]);
            const [taskApplications, setTaskApplications] = useState({});
            const [currentView, setCurrentView] = useState('tasks');
            
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [selectedDifficulty, setSelectedDifficulty] = useState('all');
            const [minPayment, setMinPayment] = useState(0);
            
            const [showCreateTask, setShowCreateTask] = useState(false);
            const [showBuyBalanceModal, setShowBuyBalanceModal] = useState(false);
            const [showSupport, setShowSupport] = useState(false);
            const [showLeaderboard, setShowLeaderboard] = useState(false);
            const [showCharity, setShowCharity] = useState(false);
            const [buyAmount, setBuyAmount] = useState(5500);
            
            const [supportSubject, setSupportSubject] = useState('');
            const [supportMessage, setSupportMessage] = useState('');
            const [leaderboard, setLeaderboard] = useState([]);
            
            const [newTask, setNewTask] = useState({
                title: '', category: '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', location: '', payment: 5000,
                difficulty: 3, description: '', requirements: '', contacts: '', minRating: 0
            });

            const categories = [
                { id: 'all', name: '–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏', icon: 'üåü' },
                { id: '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', name: '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', icon: '‚ù§Ô∏è' },
                { id: '–î–æ—Å—Ç–∞–≤–∫–∞', name: '–î–æ—Å—Ç–∞–≤–∫–∞', icon: 'üöó' },
                { id: '–ü–æ–º–æ—â—å', name: '–ü–æ–º–æ—â—å', icon: 'ü§ù' },
                { id: '–£–±–æ—Ä–∫–∞', name: '–£–±–æ—Ä–∫–∞', icon: 'üßπ' },
                { id: '–î—Ä—É–≥–æ–µ', name: '–î—Ä—É–≥–æ–µ', icon: 'üì¶' }
            ];

            const workerAgreement = `–¢–†–£–î–û–í–û–ô –î–û–ì–û–í–û–† –î–õ–Ø –†–ê–ë–û–¢–ù–ò–ö–ê

–ù–∞—Å—Ç–æ—è—â–∏–π –¥–æ–≥–æ–≤–æ—Ä —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –Ø–≤–î–µ–ª–µ –∏ –†–∞–±–æ—Ç–Ω–∏–∫–æ–º.

1. –û–ë–©–ò–ï –ü–û–õ–û–ñ–ï–ù–ò–Ø
–†–∞–±–æ—Ç–Ω–∏–∫ –æ–±—è–∑—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞–Ω–∏—è –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ –∏ –≤ —Å—Ä–æ–∫, —Å–æ–±–ª—é–¥–∞—è –≤—Å–µ —É—Å–ª–æ–≤–∏—è, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è.

2. –ü–†–ê–í–ê –ò –û–ë–Ø–ó–ê–ù–ù–û–°–¢–ò
–†–∞–±–æ—Ç–Ω–∏–∫ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ:
- –í—ã–±–∏—Ä–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü–æ–ª—É—á–∞—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
- –í—ã–≤–æ–¥–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º—ã (3000 –Ø –±–∞–ª–ª–æ–≤)

–†–∞–±–æ—Ç–Ω–∏–∫ –æ–±—è–∑—É–µ—Ç—Å—è:
- –í—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ
- –°–æ–±–ª—é–¥–∞—Ç—å —Å—Ä–æ–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ

3. –û–ü–õ–ê–¢–ê
10 –Ø –±–∞–ª–ª–æ–≤ = 1 —Ä—É–±–ª—å
–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ - 3000 –Ø –±–∞–ª–ª–æ–≤ (300 —Ä—É–±–ª–µ–π)

4. –†–ï–ô–¢–ò–ù–ì
–†–µ–π—Ç–∏–Ω–≥ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ü–µ–Ω–æ–∫ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π.
–ù–∏–∑–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –∑–∞–¥–∞–Ω–∏—è–º.

–ù–∞–∂–∏–º–∞—è "–°–æ–≥–ª–∞—Å–µ–Ω", –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏.`;

            const employerAgreement = `–¢–†–£–î–û–í–û–ô –î–û–ì–û–í–û–† –î–õ–Ø –†–ê–ë–û–¢–û–î–ê–¢–ï–õ–Ø

–ù–∞—Å—Ç–æ—è—â–∏–π –¥–æ–≥–æ–≤–æ—Ä —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –Ø–≤–î–µ–ª–µ –∏ –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–º.

1. –û–ë–©–ò–ï –ü–û–õ–û–ñ–ï–ù–ò–Ø
–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å –æ–±—è–∑—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã.

2. –ü–†–ê–í–ê –ò –û–ë–Ø–ó–ê–ù–ù–û–°–¢–ò
–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ:
- –°–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è
- –í—ã–±–∏—Ä–∞—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
- –û—Ü–µ–Ω–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å –æ–±—è–∑—É–µ—Ç—Å—è:
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
- –£–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ä–æ–∫–∏
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É
- –û–ø–ª–∞—á–∏–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏

3. –û–ü–õ–ê–¢–ê
10 –Ø –±–∞–ª–ª–æ–≤ = 1 —Ä—É–±–ª—å
–ë–∞–ª–ª—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è

4. –ü–û–î–ü–ò–°–ö–ê –Ø–≤–î–µ–ª–µ+
–ó–∞ 10000 –Ø –±–∞–ª–ª–æ–≤ –º–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π.

–ù–∞–∂–∏–º–∞—è "–°–æ–≥–ª–∞—Å–µ–Ω", –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ —Å —É—Å–ª–æ–≤–∏—è–º–∏.`;

            useEffect(() => {
                if (token) {
                    loadProfile();
                    loadTasks();
                }
            }, [token]);

            useEffect(() => {
                if (token) loadTasks();
            }, [selectedCategory, selectedDifficulty, minPayment, searchQuery]);

            useEffect(() => {
                if (token && currentView === 'myApplications') loadMyApplications();
            }, [currentView]);

            const loadProfile = async () => {
                try {
                    const data = await api.getProfile(token);
                    if (data.error) logout();
                    else setUser(data);
                } catch (err) {
                    console.error(err);
                }
            };

            const loadTasks = async () => {
                try {
                    const filters = {};
                    if (selectedCategory !== 'all') filters.category = selectedCategory;
                    if (selectedDifficulty !== 'all') filters.difficulty = selectedDifficulty;
                    if (minPayment > 0) filters.minPayment = minPayment;
                    if (searchQuery) filters.search = searchQuery;
                    const data = await api.getTasks(filters);
                    setTasks(Array.isArray(data) ? data : []);
                } catch (err) {
                    console.error(err);
                }
            };

            const loadMyApplications = async () => {
                try {
                    const data = await api.getMyApplications(token);
                    setMyApplications(Array.isArray(data) ? data : []);
                } catch (err) {
                    console.error(err);
                }
            };

            const loadTaskApplications = async (taskId) => {
                try {
                    const data = await api.getTaskApplications(token, taskId);
                    setTaskApplications(prev => ({ ...prev, [taskId]: data }));
                } catch (err) {
                    console.error(err);
                }
            };

            const loadLeaderboard = async () => {
                try {
                    const data = await api.getLeaderboard();
                    setLeaderboard(data);
                    setShowLeaderboard(true);
                } catch (err) {
                    console.error(err);
                }
            };

            const handleAuth = async () => {
                if (!isLogin && !agreedToTerms) {
                    setShowAgreement(true);
                    return;
                }
                
                setError('');
                setLoading(true);
                try {
                    const data = isLogin 
                        ? await api.login(username, password)
                        : await api.register(username, password, userType, agreedToTerms);
                    
                    if (data.error) {
                        setError(data.error);
                    } else {
                        localStorage.setItem('token', data.token);
                        setToken(data.token);
                        setUser(data.user);
                        setShowAuthModal(false);
                        setShowAgreement(false);
                    }
                } catch (err) {
                    setError('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É');
                }
                setLoading(false);
            };

            const logout = () => {
                localStorage.removeItem('token');
                setToken(null);
                setUser(null);
                setShowAuthModal(true);
            };

            const createTask = async () => {
                setError('');
                try {
                    const data = await api.createTask(token, newTask);
                    if (data.error) {
                        setError(data.error);
                    } else {
                        setUser(prev => ({ ...prev, balance: data.newBalance }));
                        setShowCreateTask(false);
                        loadTasks();
                        setNewTask({
                            title: '', category: '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', location: '', payment: 5000,
                            difficulty: 3, description: '', requirements: '', contacts: '', minRating: 0
                        });
                    }
                } catch (err) {
                    setError('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è');
                }
            };

            const deleteTask = async (taskId) => {
                if (!confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ? –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –Ω–∞ –±–∞–ª–∞–Ω—Å.')) return;
                
                try {
                    const data = await api.deleteTask(token, taskId);
                    if (data.error) {
                        alert(data.error);
                    } else {
                        alert(data.message);
                        loadTasks();
                        loadProfile();
                    }
                } catch (err) {
                    alert('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è');
                }
            };

            const applyToTask = async (taskId) => {
                try {
                    const data = await api.applyToTask(token, taskId);
                    if (data.error) alert(data.error);
                    else {
                        alert('‚úÖ –û—Ç–∫–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
                        loadTasks();
                    }
                } catch (err) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∫–ª–∏–∫–∞');
                }
            };

            const approveApplication = async (applicationId) => {
                try {
                    const data = await api.approveApplication(token, applicationId);
                    if (data.error) alert(data.error);
                    else {
                        alert('‚úÖ –û—Ç–∫–ª–∏–∫ –æ–¥–æ–±—Ä–µ–Ω!');
                        loadTasks();
                        loadProfile();
                    }
                } catch (err) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è');
                }
            };

            const rejectApplication = async (applicationId) => {
                try {
                    await api.rejectApplication(token, applicationId);
                    alert('‚úÖ –û—Ç–∫–ª–∏–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω');
                    loadTasks();
                } catch (err) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è');
                }
            };

            const buyBalance = async () => {
                try {
                    const data = await api.addBalance(token, buyAmount);
                    if (data.error) alert(data.error);
                    else {
                        setUser(prev => ({ ...prev, balance: data.balance }));
                        setShowBuyBalanceModal(false);
                        alert('‚úÖ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω!');
                    }
                } catch (err) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è');
                }
            };

            const withdrawBalance = async () => {
                try {
                    const data = await api.withdrawBalance(token);
                    if (data.error) alert(data.error);
                    else {
                        alert(data.message);
                        setUser(prev => ({ ...prev, balance: data.newBalance }));
                    }
                } catch (err) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –≤—ã–≤–æ–¥–∞');
                }
            };

            const buyPremium = async () => {
                if (!confirm('–ö—É–ø–∏—Ç—å –Ø–≤–î–µ–ª–µ+ –∑–∞ 10000 –Ø –±–∞–ª–ª–æ–≤?')) return;
                
                try {
                    const data = await api.buyPremium(token);
                    if (data.error) {
                        alert(data.error);
                    } else {
                        alert(data.message);
                        setUser(prev => ({ ...prev, balance: data.newBalance, has_premium: true }));
                    }
                } catch (err) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏');
                }
            };

            const sendSupportRequest = async () => {
                if (!supportSubject || !supportMessage) {
                    alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                    return;
                }
                
                try {
                    const data = await api.sendSupport(token, supportSubject, supportMessage);
                    if (data.error) {
                        alert(data.error);
                    } else {
                        alert(data.message);
                        setSupportSubject('');
                        setSupportMessage('');
                        setShowSupport(false);
                    }
                } catch (err) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
                }
            };

            if (showAgreement) {
                return (
                    <div className="min-h-screen bg-black bg-opacity-90 flex items-center justify-center p-4">
                        <div className="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col">
                            <div className="p-6 border-b">
                                <h2 className="text-2xl font-bold text-center">
                                    {userType === 'worker' ? '–¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞' : '–¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è'}
                                </h2>
                                <p className="text-center text-gray-600 mt-2">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏</p>
                            </div>
                            
                            <div className="flex-1 overflow-y-auto p-6 bg-gray-50">
                                <pre className="whitespace-pre-wrap text-sm text-gray-800 font-sans leading-relaxed">
                                    {userType === 'worker' ? workerAgreement : employerAgreement}
                                </pre>
                            </div>
                            
                            <div className="p-6 border-t bg-white flex gap-4">
                                <button
                                    onClick={() => {
                                        setAgreedToTerms(true);
                                        setShowAgreement(false);
                                        handleAuth();
                                    }}
                                    className="flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-semibold"
                                >
                                    ‚úì –°–æ–≥–ª–∞—Å–µ–Ω
                                </button>
                                <button
                                    onClick={() => {
                                        setShowAgreement(false);
                                        setAgreedToTerms(false);
                                    }}
                                    className="flex-1 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition font-semibold"
                                >
                                    ‚úó –ù–µ —Å–æ–≥–ª–∞—Å–µ–Ω
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (showAuthModal) {
                return (
                    <div className="min-h-screen bg-black flex items-center justify-center p-4">
                        <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full">
                            <div className="flex items-center justify-center mb-6">
                                <Icon name="briefcase" className="w-16 h-16 text-green-600" />
                            </div>
                            <h1 className="text-3xl font-bold text-center mb-2">–Ø–≤–î–µ–ª–µ</h1>
                            <p className="text-center text-gray-600 mb-6">–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ</p>
                            
                            {error && (
                                <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4">
                                    {error}
                                </div>
                            )}
                            
                            <div className="flex gap-2 mb-6">
                                <button
                                    onClick={() => setIsLogin(true)}
                                    className={`flex-1 py-2 rounded-lg transition ${isLogin ? 'bg-green-600 text-white' : 'bg-gray-200'}`}
                                >
                                    –í—Ö–æ–¥
                                </button>
                                <button
                                    onClick={() => setIsLogin(false)}
                                    className={`flex-1 py-2 rounded-lg transition ${!isLogin ? 'bg-green-600 text-white' : 'bg-gray-200'}`}
                                >
                                    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                                </button>
                            </div>
                            
                            <input
                                type="text"
                                placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                                value={username}
                                onChange={(e) => setUsername(e.target.value)}
                                className="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-green-500 outline-none"
                            />
                            
                            <input
                                type="password"
                                placeholder="–ü–∞—Ä–æ–ª—å"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleAuth()}
                                className="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-green-500 outline-none"
                            />
                            
                            {!isLogin && (
                                <select
                                    value={userType}
                                    onChange={(e) => setUserType(e.target.value)}
                                    className="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-green-500 outline-none"
                                >
                                    <option value="worker">üë∑ –†–∞–±–æ—á–∏–π</option>
                                    <option value="employer">üëî –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å</option>
                                </select>
                            )}
                            
                            <button
                                onClick={handleAuth}
                                disabled={loading}
                                className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-semibold disabled:bg-gray-400"
                            >
                                {loading ? '–ó–∞–≥—Ä—É–∑–∫–∞...' : (isLogin ? '–í–æ–π—Ç–∏' : '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è')}
                            </button>
                        </div>
                    </div>
                );
            }

            if (!user) return <div className="min-h-screen flex items-center justify-center">–ó–∞–≥—Ä—É–∑–∫–∞...</div>;

            const myTasks = tasks.filter(t => t.employer_name === user.username);

            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="bg-gradient-to-r from-green-600 to-emerald-700 text-white shadow-lg sticky top-0 z-10">
                        <div className="max-w-7xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between flex-wrap gap-4">
                                <div className="flex items-center gap-3">
                                    <Icon name="briefcase" className="w-8 h-8" />
                                    <div>
                                        <span className="text-2xl font-bold">–Ø–≤–î–µ–ª–µ</span>
                                        <p className="text-sm text-green-100">
                                            {user.type === 'employer' ? 'üëî –†–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å' : 'üë∑ –†–∞–±–æ—á–∏–π'}: {user.username}
                                        </p>
                                    </div>
                                </div>
                                
                                <div className="flex items-center gap-4">
                                    <div className="bg-white bg-opacity-20 rounded-lg px-4 py-2">
                                        <div className="flex items-center gap-2">
                                            <Icon name="wallet" />
                                            <span className="font-bold">{user.balance} –Ø</span>
                                        </div>
                                    </div>
                                    <div className="bg-white bg-opacity-20 rounded-lg px-4 py-2">
                                        <div className="flex items-center gap-2">
                                            <Star className="text-yellow-300" />
                                            <span className="font-bold">{user.rating.toFixed(1)}</span>
                                        </div>
                                    </div>
                                    {user.has_premium && (
                                        <div className="bg-yellow-400 text-yellow-900 px-3 py-1 rounded-lg font-bold text-sm">
                                            ‚≠ê Premium
                                        </div>
                                    )}
                                </div>
                            </div>
                            
                            <nav className="flex flex-wrap gap-3 mt-4">
                                <button
                                    onClick={() => setCurrentView('tasks')}
                                    className={`px-4 py-2 rounded-lg font-medium transition ${currentView === 'tasks' ? 'bg-white text-green-700' : 'bg-white bg-opacity-20 hover:bg-opacity-30'}`}
                                >
                                    –í—Å–µ –∑–∞–¥–∞–Ω–∏—è
                                </button>
                                
                                {user.type === 'employer' && (
                                    <button
                                        onClick={() => setCurrentView('myTasks')}
                                        className={`px-4 py-2 rounded-lg font-medium transition ${currentView === 'myTasks' ? 'bg-white text-green-700' : 'bg-white bg-opacity-20 hover:bg-opacity-30'}`}
                                    >
                                        –ú–æ–∏ –∑–∞–¥–∞–Ω–∏—è ({myTasks.length})
                                    </button>
                                )}
                                
                                {user.type === 'worker' && (
                                    <button
                                        onClick={() => setCurrentView('myApplications')}
                                        className={`px-4 py-2 rounded-lg font-medium transition ${currentView === 'myApplications' ? 'bg-white text-green-700' : 'bg-white bg-opacity-20 hover:bg-opacity-30'}`}
                                    >
                                        –ú–æ–∏ –æ—Ç–∫–ª–∏–∫–∏ ({myApplications.length})
                                    </button>
                                )}
                                
                                <button
                                    onClick={() => setCurrentView('profile')}
                                    className={`px-4 py-2 rounded-lg font-medium transition ${currentView === 'profile' ? 'bg-white text-green-700' : 'bg-white bg-opacity-20 hover:bg-opacity-30'}`}
                                >
                                    –ü—Ä–æ—Ñ–∏–ª—å
                                </button>
                                
                                <button
                                    onClick={loadLeaderboard}
                                    className="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg font-medium transition"
                                >
                                    üèÜ –†–µ–π—Ç–∏–Ω–≥
                                </button>
                                
                                <button
                                    onClick={() => setShowSupport(true)}
                                    className="px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg font-medium transition"
                                >
                                    üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞
                                </button>
                                
                                <button
                                    onClick={logout}
                                    className="ml-auto px-4 py-2 bg-red-500 bg-opacity-80 hover:bg-opacity-100 rounded-lg transition"
                                >
                                    –í—ã—Ö–æ–¥
                                </button>
                            </nav>

                            <div className="mt-4 bg-white bg-opacity-20 rounded-lg p-4">
                                <h3 className="font-bold mb-2">‚ù§Ô∏è –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h3>
                                <div className="flex gap-3 flex-wrap">
                                    <button 
                                        onClick={() => alert('–†–∞–∑–¥–µ–ª "–ñ–∏–≤–æ—Ç–Ω—ã–µ" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')}
                                        className="px-4 py-2 bg-white bg-opacity-30 rounded-lg hover:bg-opacity-50 transition"
                                    >
                                        üêï –ñ–∏–≤–æ—Ç–Ω—ã–µ
                                    </button>
                                    <button 
                                        onClick={() => alert('–†–∞–∑–¥–µ–ª "–î–µ—Ç–∏" –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')}
                                        className="px-4 py-2 bg-white bg-opacity-30 rounded-lg hover:bg-opacity-50 transition"
                                    >
                                        üë∂ –î–µ—Ç–∏
                                    </button>
                                    <button 
                                        onClick={() => alert('–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É! ‚ù§Ô∏è')}
                                        className="px-4 py-2 bg-white bg-opacity-30 rounded-lg hover:bg-opacity-50 transition"
                                    >
                                        üíö –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Å–∞–π—Ç
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div className="max-w-7xl mx-auto px-4 py-8">
                        {currentView === 'profile' && (
                            <div className="max-w-2xl mx-auto">
                                <div className="bg-white rounded-lg shadow p-8">
                                    <h2 className="text-2xl font-bold mb-6">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                                    <div className="space-y-4">
                                        <div className="flex items-center justify-between p-4 bg-green-50 rounded-lg">
                                            <div>
                                                <p className="text-sm text-gray-600">–ë–∞–ª–∞–Ω—Å</p>
                                                <p className="text-2xl font-bold text-green-700">{user.balance} –Ø –±–∞–ª–ª–æ–≤</p>
                                                <p className="text-sm text-gray-500">= {(user.balance / 10).toFixed(2)} —Ä—É–±–ª–µ–π</p>
                                            </div>
                                            <Icon name="wallet" className="w-12 h-12 text-green-600" />
                                        </div>
                                        
                                        <div className="flex items-center justify-between p-4 bg-yellow-50 rounded-lg">
                                            <div>
                                                <p className="text-sm text-gray-600">–†–µ–π—Ç–∏–Ω–≥</p>
                                                <p className="text-2xl font-bold text-yellow-700">{user.rating.toFixed(1)} ‚≠ê</p>
                                            </div>
                                            <Icon name="award" className="w-12 h-12 text-yellow-600" />
                                        </div>
                                        
                                        {user.type === 'employer' && !user.has_premium && (
                                            <button
                                                onClick={buyPremium}
                                                disabled={user.balance < 10000}
                                                className={`w-full py-3 rounded-lg transition font-semibold ${user.balance >= 10000 ? 'bg-yellow-500 text-white hover:bg-yellow-600' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`}
                                            >
                                                ‚≠ê –ö—É–ø–∏—Ç—å –Ø–≤–î–µ–ª–µ+ (10000 –Ø)
                                            </button>
                                        )}
                                        
                                        {user.has_premium && (
                                            <div className="bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4">
                                                <p className="text-yellow-800 font-bold">‚≠ê –£ –≤–∞—Å –µ—Å—Ç—å –Ø–≤–î–µ–ª–µ+</p>
                                                <p className="text-sm text-yellow-700 mt-1">–í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –¥–ª—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</p>
                                            </div>
                                        )}
                                        
                                        {user.type === 'employer' && (
                                            <button
                                                onClick={() => setShowBuyBalanceModal(true)}
                                                className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-semibold"
                                            >
                                                –ö—É–ø–∏—Ç—å –Ø –±–∞–ª–ª—ã
                                            </button>
                                        )}
                                        
                                        {user.type === 'worker' && (
                                            <button
                                                onClick={withdrawBalance}
                                                disabled={user.balance < 3000}
                                                className={`w-full py-3 rounded-lg transition font-semibold ${user.balance >= 3000 ? 'bg-green-600 text-white hover:bg-green-700' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`}
                                            >
                                                –í—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏ (–º–∏–Ω. 3000 –Ø)
                                            </button>
                                        )}
                                    </div>
                                </div>
                            </div>
                        )}

                        {currentView === 'tasks' && (
                            <>
                                <div className="mb-6 flex gap-4 flex-wrap">
                                    <div className="flex-1 min-w-[250px] relative">
                                        <Icon name="search" className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-5 w-5" />
                                        <input
                                            type="text"
                                            placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞–Ω–∏–π..."
                                            value={searchQuery}
                                            onChange={(e) => setSearchQuery(e.target.value)}
                                            className="w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                        />
                                    </div>
                                    
                                    {user.type === 'employer' && (
                                        <button
                                            onClick={() => setShowCreateTask(true)}
                                            className="flex items-center gap-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-semibold"
                                        >
                                            <Icon name="plus" />
                                            –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ
                                        </button>
                                    )}
                                </div>

                                <div className="bg-white rounded-lg shadow p-6 mb-6">
                                    <h3 className="font-semibold mb-4">–§–∏–ª—å—Ç—Ä—ã</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium mb-2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                            <select
                                                value={selectedCategory}
                                                onChange={(e) => setSelectedCategory(e.target.value)}
                                                className="w-full p-2 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                            >
                                                {categories.map(c => <option key={c.id} value={c.id}>{c.icon} {c.name}</option>)}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium mb-2">–°–ª–æ–∂–Ω–æ—Å—Ç—å</label>
                                            <select
                                                value={selectedDifficulty}
                                                onChange={(e) => setSelectedDifficulty(e.target.value)}
                                                className="w-full p-2 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                            >
                                                <option value="all">–õ—é–±–∞—è</option>
                                                {[1,2,3,4,5].map(d => <option key={d} value={d}>{'‚≠ê'.repeat(d)}</option>)}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium mb-2">–û–ø–ª–∞—Ç–∞ –æ—Ç {minPayment} –Ø</label>
                                            <input
                                                type="range"
                                                min="0"
                                                max="50000"
                                                step="500"
                                                value={minPayment}
                                                onChange={(e) => setMinPayment(parseInt(e.target.value))}
                                                className="w-full"
                                            />
                                        </div>
                                    </div>
                                </div>

                                <div className="space-y-4">
                                    {tasks.length === 0 ? (
                                        <div className="text-center py-12 bg-white rounded-lg">
                                            <Icon name="briefcase" className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                                            <p className="text-gray-500 text-lg">–ó–∞–¥–∞–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
                                        </div>
                                    ) : (
                                        tasks.map(task => {
                                            const canApply = user.type === 'worker' && user.rating >= task.min_rating;
                                            const lowRating = user.type === 'worker' && user.rating < task.min_rating;
                                            
                                            return (
                                                <div key={task.id} className="bg-white rounded-lg shadow hover:shadow-lg transition p-6">
                                                    <div className="flex justify-between items-start mb-3 flex-wrap gap-2">
                                                        <div className="flex-1">
                                                            <div className="flex items-center gap-2 mb-2">
                                                                <span className="text-2xl">{categories.find(c => c.name === task.category)?.icon}</span>
                                                                <h3 className="text-xl font-bold">{task.title}</h3>
                                                            </div>
                                                            <div className="flex flex-wrap gap-3 text-sm text-gray-600">
                                                                <div className="flex items-center gap-1">
                                                                    <Icon name="mapPin" className="w-4 h-4" />
                                                                    {task.location || '–ù–µ —É–∫–∞–∑–∞–Ω'}
                                                                </div>
                                                                <div className="flex items-center gap-1 text-green-600 font-semibold">
                                                                    <Icon name="dollar" className="w-4 h-4" />
                                                                    {task.payment} –Ø ({(task.payment / 10).toFixed(0)} ‚ÇΩ)
                                                                </div>
                                                                <div>–°–ª–æ–∂–Ω–æ—Å—Ç—å: {'‚≠ê'.repeat(task.difficulty)}</div>
                                                                {task.min_rating > 0 && (
                                                                    <div className="text-yellow-600">
                                                                        –ú–∏–Ω. —Ä–µ–π—Ç–∏–Ω–≥: {task.min_rating} ‚≠ê
                                                                    </div>
                                                                )}
                                                                <div className="text-gray-500">
                                                                    üìÖ {new Date(task.created_at).toLocaleDateString('ru-RU')}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <p className="text-gray-700 mb-4">{task.description}</p>
                                                    {task.requirements && (
                                                        <div className="mb-4 p-3 bg-gray-50 rounded-lg">
                                                            <p className="text-sm font-semibold mb-1">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</p>
                                                            <p className="text-sm text-gray-600">{task.requirements}</p>
                                                        </div>
                                                    )}
                                                    <div className="flex items-center justify-between text-sm text-gray-500 flex-wrap gap-2">
                                                        <div>
                                                            <span>–ó–∞–∫–∞–∑—á–∏–∫: {task.employer_name}</span>
                                                            <span className="ml-2 text-yellow-600">‚òÖ {task.employer_rating.toFixed(1)}</span>
                                                        </div>
                                                        {canApply && (
                                                            <button
                                                                onClick={() => applyToTask(task.id)}
                                                                className="flex items-center gap-2 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition font-semibold"
                                                            >
                                                                <Icon name="send" className="w-4 h-4" />
                                                                –ü—Ä–∏–Ω—è—Ç—å –∑–∞–¥–∞–Ω–∏–µ
                                                            </button>
                                                        )}
                                                        {lowRating && (
                                                            <div className="text-red-600 font-semibold">
                                                                ‚ö†Ô∏è –£ –≤–∞—Å —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π —Ä–µ–π—Ç–∏–Ω–≥
                                                            </div>
                                                        )}
                                                    </div>
                                                </div>
                                            );
                                        })
                                    )}
                                </div>
                            </>
                        )}

                        {currentView === 'myTasks' && user.type === 'employer' && (
                            <div className="space-y-4">
                                {myTasks.length === 0 ? (
                                    <div className="text-center py-12 bg-white rounded-lg">
                                        <Icon name="briefcase" className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                                        <p className="text-gray-500 text-lg mb-4">–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π</p>
                                        <button
                                            onClick={() => setShowCreateTask(true)}
                                            className="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-semibold"
                                        >
                                            –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ
                                        </button>
                                    </div>
                                ) : (
                                    myTasks.map(task => {
                                        if (!taskApplications[task.id]) loadTaskApplications(task.id);
                                        return (
                                            <div key={task.id} className="bg-white rounded-lg shadow p-6">
                                                <div className="flex justify-between items-start mb-4 flex-wrap gap-2">
                                                    <div className="flex-1">
                                                        <h3 className="text-xl font-bold mb-2">{task.title}</h3>
                                                        <div className="flex items-center gap-4 text-sm text-gray-600 flex-wrap">
                                                            <span>–û–ø–ª–∞—Ç–∞: {task.payment} –Ø</span>
                                                            <span>–°–ª–æ–∂–Ω–æ—Å—Ç—å: {'‚≠ê'.repeat(task.difficulty)}</span>
                                                            <span className={`font-semibold ${task.status === 'completed' ? 'text-green-600' : 'text-blue-600'}`}>
                                                                {task.status === 'completed' ? '‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ' : '‚óã –ê–∫—Ç–∏–≤–Ω–æ'}
                                                            </span>
                                                            <span className="text-gray-500">
                                                                üìÖ {new Date(task.created_at).toLocaleDateString('ru-RU')}
                                                            </span>
                                                        </div>
                                                    </div>
                                                    {task.status === 'open' && (
                                                        <button
                                                            onClick={() => deleteTask(task.id)}
                                                            className="flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition text-sm font-semibold"
                                                        >
                                                            <Icon name="trash" className="w-4 h-4" />
                                                            –£–¥–∞–ª–∏—Ç—å
                                                        </button>
                                                    )}
                                                </div>
                                                <p className="text-gray-700 mb-4">{task.description}</p>
                                                <div className="bg-green-50 rounded-lg p-4">
                                                    <p className="font-semibold mb-3">–û—Ç–∫–ª–∏–∫–æ–≤: {taskApplications[task.id]?.length || 0}</p>
                                                    {taskApplications[task.id] && taskApplications[task.id].length > 0 && (
                                                        <div className="space-y-2">
                                                            {taskApplications[task.id].map(app => (
                                                                <div key={app.id} className="flex items-center justify-between bg-white rounded-lg p-3 flex-wrap gap-2">
                                                                    <div className="flex items-center gap-3">
                                                                        <Icon name="user" className="text-gray-600" />
                                                                        <div>
                                                                            <span className="font-medium">{app.username}</span>
                                                                            <div className="flex items-center gap-1 text-sm text-yellow-600">
                                                                                <Star className="w-4 h-4" />
                                                                                {app.rating}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div className="flex gap-2">
                                                                        {app.status === 'pending' && (
                                                                            <>
                                                                                <button
                                                                                    onClick={() => approveApplication(app.id)}
                                                                                    className="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm font-semibold"
                                                                                >
                                                                                    –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
                                                                                </button>
                                                                                <button
                                                                                    onClick={() => rejectApplication(app.id)}
                                                                                    className="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition text-sm font-semibold"
                                                                                >
                                                                                    –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                                                                </button>
                                                                            </>
                                                                        )}
                                                                        {app.status === 'approved' && <span className="text-green-600 font-semibold">‚úì –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ</span>}
                                                                        {app.status === 'rejected' && <span className="text-red-600 font-semibold">‚úó –û—Ç–∫–ª–æ–Ω–µ–Ω–æ</span>}
                                                                    </div>
                                                                </div>
                                                            ))}
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })
                                )}
                            </div>
                        )}

                        {currentView === 'myApplications' && user.type === 'worker' && (
                            <div className="space-y-4">
                                {myApplications.length === 0 ? (
                                    <div className="text-center py-12 bg-white rounded-lg">
                                        <Icon name="send" className="w-16 h-16 text-gray-300 mx-auto mb-4" />
                                        <p className="text-gray-500 text-lg">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∫–ª–∏–∫–æ–≤</p>
                                    </div>
                                ) : (
                                    myApplications.map(app => (
                                        <div key={app.id} className="bg-white rounded-lg shadow p-6">
                                            <div className="flex items-start justify-between mb-3 flex-wrap gap-2">
                                                <div>
                                                    <h3 className="text-xl font-bold mb-2">{app.title}</h3>
                                                    <div className="flex items-center gap-4 text-sm text-gray-600 flex-wrap">
                                                        <span>–û–ø–ª–∞—Ç–∞: {app.payment} –Ø ({(app.payment / 10).toFixed(0)} ‚ÇΩ)</span>
                                                        <span>–ó–∞–∫–∞–∑—á–∏–∫: {app.employer_name}</span>
                                                    </div>
                                                </div>
                                                <div className={`px-4 py-2 rounded-lg font-semibold ${
                                                    app.status === 'approved' ? 'bg-green-100 text-green-700' :
                                                    app.status === 'rejected' ? 'bg-red-100 text-red-700' :
                                                    'bg-yellow-100 text-yellow-700'
                                                }`}>
                                                    {app.status === 'approved' ? '‚úì –û–¥–æ–±—Ä–µ–Ω–æ' :
                                                     app.status === 'rejected' ? '‚úó –û—Ç–∫–ª–æ–Ω–µ–Ω–æ' :
                                                     '‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ'}
                                                </div>
                                            </div>
                                            <p className="text-gray-700 mb-3">{app.description}</p>
                                            {app.location && (
                                                <div className="flex items-center gap-2 text-gray-600 mb-3">
                                                    <Icon name="mapPin" className="w-4 h-4" />
                                                    <span>{app.location}</span>
                                                </div>
                                            )}
                                            {app.contacts && app.status === 'approved' && (
                                                <div className="bg-green-50 rounded-lg p-4">
                                                    <p className="text-sm font-semibold mb-1">–ö–æ–Ω—Ç–∞–∫—Ç—ã –∑–∞–∫–∞–∑—á–∏–∫–∞:</p>
                                                    <p className="text-sm text-gray-600">{app.contacts}</p>
                                                </div>
                                            )}
                                            <div className="mt-3 text-sm text-gray-500">
                                                –û—Ç–∫–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: {new Date(app.applied_at).toLocaleString('ru-RU')}
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>
                        )}
                    </div>

                    {showCreateTask && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto">
                            <div className="bg-white rounded-lg max-w-2xl w-full my-8 p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</h2>
                                    <button onClick={() => setShowCreateTask(false)}>
                                        <Icon name="x" className="w-6 h-6 text-gray-500 hover:text-gray-700" />
                                    </button>
                                </div>
                                
                                {error && <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4">{error}</div>}
                                
                                <div className="space-y-4 max-h-[70vh] overflow-y-auto pr-2">
                                    <div>
                                        <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è *</label>
                                        <input
                                            type="text"
                                            value={newTask.title}
                                            onChange={(e) => setNewTask({...newTask, title: e.target.value})}
                                            className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–º–æ—â—å —Å –ø–µ—Ä–µ–µ–∑–¥–æ–º"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                        <select
                                            value={newTask.category}
                                            onChange={(e) => setNewTask({...newTask, category: e.target.value})}
                                            className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                        >
                                            {categories.filter(c => c.id !== 'all').map(cat => (
                                                <option key={cat.id} value={cat.name}>{cat.icon} {cat.name}</option>
                                            ))}
                                        </select>
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium mb-1">–ê–¥—Ä–µ—Å</label>
                                            <input
                                                type="text"
                                                value={newTask.location}
                                                onChange={(e) => setNewTask({...newTask, location: e.target.value})}
                                                className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                                placeholder="–ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞ 1"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium mb-1">
                                                –ú–∏–Ω. —Ä–µ–π—Ç–∏–Ω–≥ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è {!user.has_premium && '(–Ω—É–∂–µ–Ω Premium)'}
                                            </label>
                                            <select
                                                value={newTask.minRating}
                                                onChange={(e) => setNewTask({...newTask, minRating: parseFloat(e.target.value)})}
                                                disabled={!user.has_premium}
                                                className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none disabled:bg-gray-100"
                                            >
                                                <option value="0">–õ—é–±–æ–π</option>
                                                <option value="3">3.0 ‚≠ê –∏ –≤—ã—à–µ</option>
                                                <option value="4">4.0 ‚≠ê –∏ –≤—ã—à–µ</option>
                                                <option value="4.5">4.5 ‚≠ê –∏ –≤—ã—à–µ</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium mb-1">
                                            –û–ø–ª–∞—Ç–∞: {newTask.payment} –Ø ({(newTask.payment / 10).toFixed(0)} ‚ÇΩ)
                                        </label>
                                        <input
                                            type="range"
                                            min="1000"
                                            max="100000"
                                            step="500"
                                            value={newTask.payment}
                                            onChange={(e) => setNewTask({...newTask, payment: parseInt(e.target.value)})}
                                            className="w-full"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium mb-1">
                                            –°–ª–æ–∂–Ω–æ—Å—Ç—å: {'‚≠ê'.repeat(newTask.difficulty)}
                                        </label>
                                        <input
                                            type="range"
                                            min="1"
                                            max="5"
                                            value={newTask.difficulty}
                                            onChange={(e) => setNewTask({...newTask, difficulty: parseInt(e.target.value)})}
                                            className="w-full"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium mb-1">–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è *</label>
                                        <textarea
                                            value={newTask.description}
                                            onChange={(e) => setNewTask({...newTask, description: e.target.value})}
                                            rows={4}
                                            className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                            placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞–Ω–∏–µ..."
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium mb-1">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</label>
                                        <textarea
                                            value={newTask.requirements}
                                            onChange={(e) => setNewTask({...newTask, requirements: e.target.value})}
                                            rows={3}
                                            className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                            placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è..."
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium mb-1">–ö–æ–Ω—Ç–∞–∫—Ç—ã</label>
                                        <input
                                            type="text"
                                            value={newTask.contacts}
                                            onChange={(e) => setNewTask({...newTask, contacts: e.target.value})}
                                            className="w-full p-3 border rounded-lg focus:ring-2 focus:ring-green-500 outline-none"
                                            placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email"
                                        />
                                    </div>
                                    
                                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                                        <p className="text-sm text-yellow-800">
                                            ‚ö†Ô∏è –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è —Å –≤–∞—à–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –±—É–¥–µ—Ç —Å–ø–∏—Å–∞–Ω–æ {newTask.payment} –Ø –±–∞–ª–ª–æ–≤.
                                            <br />–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: {user.balance} –Ø
                                        </p>
                                    </div>
                                    
                                    <button
                                        onClick={createTask}
                                        disabled={user.balance < newTask.payment}
                                        className={`w-full py-3 rounded-lg transition font-semibold ${
                                            user.balance >= newTask.payment
                                                ? 'bg-green-600 text-white hover:bg-green-700'
                                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                        }`}
                                    >
                                        {user.balance >= newTask.payment ? '–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ' : '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {showBuyBalanceModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-lg max-w-md w-full p-8">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold">–ö—É–ø–∏—Ç—å –Ø –±–∞–ª–ª—ã</h2>
                                    <button onClick={() => setShowBuyBalanceModal(false)}>
                                        <Icon name="x" className="w-6 h-6 text-gray-500 hover:text-gray-700" />
                                    </button>
                                </div>
                                
                                <div className="mb-6">
                                    <div className="text-center mb-4">
                                        <p className="text-gray-600 mb-2">–°–∫–æ–ª—å–∫–æ "–Ø" –±–∞–ª–ª–æ–≤ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å?</p>
                                        <p className="text-sm text-gray-500">10 –Ø –±–∞–ª–ª–æ–≤ = 1 —Ä—É–±–ª—å</p>
                                    </div>
                                    
                                    <div className="mb-4">
                                        <label className="block text-center text-lg font-bold mb-2">
                                            {buyAmount} –Ø –±–∞–ª–ª–æ–≤
                                        </label>
                                        <p className="text-center text-green-600 font-semibold mb-4">
                                            = {(buyAmount / 10).toFixed(2)} —Ä—É–±–ª–µ–π
                                        </p>
                                        <input
                                            type="range"
                                            min="1000"
                                            max="100000"
                                            step="500"
                                            value={buyAmount}
                                            onChange={(e) => setBuyAmount(parseInt(e.target.value))}
                                            className="w-full"
                                        />
                                    </div>
                                </div>
                                
                                <button
                                    onClick={buyBalance}
                                    className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-semibold text-lg"
                                >
                                    –ö—É–ø–∏—Ç—å –∑–∞ {(buyAmount / 10).toFixed(2)} ‚ÇΩ
                                </button>
                            </div>
                        </div>
                    )}

                    {showSupport && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-lg max-w-md w-full p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold">üí¨ –û–±—Ä–∞—â–µ–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</h2>
                                    <button onClick={() => setShowSupport(false)}>
                                        <Icon name="x" className="w-6 h-6 text-gray-500 hover:text-gray-700" />
                                    </button>
                                </div>
                                
                                <input
                                    type="text"
                                    placeholder="–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è"
                                    value={supportSubject}
                                    onChange={(e) => setSupportSubject(e.target.value)}
                                    className="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-green-500 outline-none"
                                />
                                
                                <textarea
                                    placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ..."
                                    value={supportMessage}
                                    onChange={(e) => setSupportMessage(e.target.value)}
                                    rows={6}
                                    className="w-full p-3 border rounded-lg mb-3 focus:ring-2 focus:ring-green-500 outline-none"
                                />
                                
                                <button
                                    onClick={sendSupportRequest}
                                    className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-semibold"
                                >
                                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ
                                </button>
                                
                                <p className="text-sm text-gray-500 mt-3 text-center">
                                    –ú—ã –æ—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤
                                </p>
                            </div>
                        </div>
                    )}

                    {showLeaderboard && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-lg max-w-2xl w-full p-6 max-h-[80vh] overflow-y-auto">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold">üèÜ –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                                    <button onClick={() => setShowLeaderboard(false)}>
                                        <Icon name="x" className="w-6 h-6 text-gray-500 hover:text-gray-700" />
                                    </button>
                                </div>
                                
                                <div className="space-y-2">
                                    {leaderboard.length === 0 ? (
                                        <p className="text-center text-gray-500 py-8">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ü–µ–Ω–æ–∫</p>
                                    ) : (
                                        leaderboard.map((u, index) => (
                                            <div
                                                key={index}
                                                className={`flex items-center justify-between p-4 rounded-lg ${
                                                    index === 0 ? 'bg-yellow-50 border-2 border-yellow-400' :
                                                    index === 1 ? 'bg-gray-50 border-2 border-gray-300' :
                                                    index === 2 ? 'bg-orange-50 border-2 border-orange-300' :
                                                    'bg-gray-50'
                                                }`}
                                            >
                                                <div className="flex items-center gap-3">
                                                    <span className="text-2xl font-bold w-8">
                                                        {index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}.`}
                                                    </span>
                                                    <div>
                                                        <p className="font-bold">{u.username}</p>
                                                        <p className="text-sm text-gray-500">
                                                            {u.total_ratings} {u.total_ratings === 1 ? '–æ—Ü–µ–Ω–∫–∞' : '–æ—Ü–µ–Ω–æ–∫'}
                                                        </p>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-2">
                                                    <Star className="w-6 h-6 text-yellow-500" />
                                                    <span className="text-xl font-bold">{u.rating.toFixed(1)}</span>
                                                </div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<TaskPlatform />, document.getElementById('root'));
    </script>
</body>
</html>
